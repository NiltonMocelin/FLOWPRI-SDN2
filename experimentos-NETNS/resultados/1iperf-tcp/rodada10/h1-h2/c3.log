loading app core/main_controller.py
loading app ryu.controller.ofp_handler
instantiating app core/main_controller.py of FLOWPRI2
CONTROLADOR - 
 Init Start

Controlador ID - 172.16.3.10
Controlador IPv4 - 172.16.3.10
Controlador IPv6 - fe80::f49c:a6ff:fe53:fa79
Controlador MAC - f6:9c:a6:53:fa:79
Lading cfg...
{'ManagementHost': '172.16.3.30', 'addSwitches': [{'nome_switch': 3, 'ovsdb_addr': 'tcp:172.16.3.10:6633', 'port_to_controller': 12, 'portas': [{'nome_porta': 10, 'nome_interface': 'veth16', 'banda_total': 50000000, 'proxSwitch': -1}, {'nome_porta': 11, 'nome_interface': 'veth18', 'banda_total': 50000000, 'proxSwitch': -1}, {'nome_porta': 12, 'nome_interface': 'veth20', 'banda_total': 50000000, 'proxSwitch': -1}, {'nome_porta': 13, 'nome_interface': 'veth22', 'banda_total': 50000000, 'proxSwitch': -1}, {'nome_porta': 14, 'nome_interface': 'veth23', 'banda_total': 50000000, 'proxSwitch': -1}]}], 'addRotas': [{'src_prefix': '172.16.3.30', 'dst_prefix': '172.16.3.10', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 11, 'porta_saida': 12, 'ordem': 0}]}, {'src_prefix': '172.16.3.30', 'dst_prefix': '172.16.2.30', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 11, 'porta_saida': 10, 'ordem': 0}]}, {'src_prefix': '172.16.3.30', 'dst_prefix': '172.16.1.30', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 11, 'porta_saida': 10, 'ordem': 0}]}, {'src_prefix': '172.16.3.30', 'dst_prefix': '172.16.4.30', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 11, 'porta_saida': 14, 'ordem': 0}]}, {'src_prefix': '172.16.3.30', 'dst_prefix': '172.16.5.30', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 11, 'porta_saida': 14, 'ordem': 0}]}, {'src_prefix': '172.16.3.10', 'dst_prefix': '172.16.3.30', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 12, 'porta_saida': 11, 'ordem': 0}]}, {'src_prefix': '172.16.2.30', 'dst_prefix': '172.16.3.30', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 10, 'porta_saida': 11, 'ordem': 0}]}, {'src_prefix': '172.16.1.30', 'dst_prefix': '172.16.3.30', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 10, 'porta_saida': 11, 'ordem': 0}]}, {'src_prefix': '172.16.4.30', 'dst_prefix': '172.16.3.30', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 14, 'porta_saida': 11, 'ordem': 0}]}, {'src_prefix': '172.16.5.30', 'dst_prefix': '172.16.3.30', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 14, 'porta_saida': 11, 'ordem': 0}]}, {'src_prefix': '172.16.3.10', 'dst_prefix': '172.16.3.50', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 12, 'porta_saida': 13, 'ordem': 0}]}, {'src_prefix': '172.16.3.30', 'dst_prefix': '172.16.3.50', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 11, 'porta_saida': 13, 'ordem': 0}]}, {'src_prefix': '172.16.3.50', 'dst_prefix': '172.16.3.10', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 13, 'porta_saida': 12, 'ordem': 0}]}, {'src_prefix': '172.16.3.50', 'dst_prefix': '172.16.3.30', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 13, 'porta_saida': 11, 'ordem': 0}]}, {'src_prefix': '172.16.1.0', 'dst_prefix': '172.16.4.0', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 10, 'porta_saida': 14, 'ordem': 0}]}, {'src_prefix': '172.16.4.0', 'dst_prefix': '172.16.1.0', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 14, 'porta_saida': 10, 'ordem': 0}]}, {'src_prefix': '172.16.1.0', 'dst_prefix': '172.16.5.0', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 10, 'porta_saida': 14, 'ordem': 0}]}, {'src_prefix': '172.16.5.0', 'dst_prefix': '172.16.1.0', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 14, 'porta_saida': 10, 'ordem': 0}]}, {'src_prefix': '172.16.2.0', 'dst_prefix': '172.16.4.0', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 10, 'porta_saida': 11, 'ordem': 0}]}, {'src_prefix': '172.16.4.0', 'dst_prefix': '172.16.2.0', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 14, 'porta_saida': 10, 'ordem': 0}]}, {'src_prefix': '172.16.2.0', 'dst_prefix': '172.16.5.0', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 10, 'porta_saida': 14, 'ordem': 0}]}, {'src_prefix': '172.16.5.0', 'dst_prefix': '172.16.2.0', 'switches_rota': [{'nome_switch': 3, 'porta_entrada': 14, 'porta_saida': 10, 'ordem': 0}]}], 'addDominioPrefix': [{'ip': '172.16.3.0'}], 'ipsDHCP': [{'ip': '172.16.3.1'}, {'ip': '172.16.3.2'}, {'ip': '172.16.3.3'}, {'ip': '172.16.3.4'}, {'ip': '172.16.3.5'}]}
Adicionando configuracao de switch
{'nome_switch': 3, 'ovsdb_addr': 'tcp:172.16.3.10:6633', 'port_to_controller': 12, 'portas': [{'nome_porta': 10, 'nome_interface': 'veth16', 'banda_total': 50000000, 'proxSwitch': -1}, {'nome_porta': 11, 'nome_interface': 'veth18', 'banda_total': 50000000, 'proxSwitch': -1}, {'nome_porta': 12, 'nome_interface': 'veth20', 'banda_total': 50000000, 'proxSwitch': -1}, {'nome_porta': 13, 'nome_interface': 'veth22', 'banda_total': 50000000, 'proxSwitch': -1}, {'nome_porta': 14, 'nome_interface': 'veth23', 'banda_total': 50000000, 'proxSwitch': -1}]}
Novo switch: nome = S3
{'nome_porta': 10, 'nome_interface': 'veth16', 'banda_total': 50000000, 'proxSwitch': -1}
[S3] Nova porta: porta=10, banda=50000000, proximoSalto=-1

{'nome_porta': 11, 'nome_interface': 'veth18', 'banda_total': 50000000, 'proxSwitch': -1}
[S3] Nova porta: porta=11, banda=50000000, proximoSalto=-1

{'nome_porta': 12, 'nome_interface': 'veth20', 'banda_total': 50000000, 'proxSwitch': -1}
[S3] Nova porta: porta=12, banda=50000000, proximoSalto=-1

{'nome_porta': 13, 'nome_interface': 'veth22', 'banda_total': 50000000, 'proxSwitch': -1}
[S3] Nova porta: porta=13, banda=50000000, proximoSalto=-1

{'nome_porta': 14, 'nome_interface': 'veth23', 'banda_total': 50000000, 'proxSwitch': -1}
[S3] Nova porta: porta=14, banda=50000000, proximoSalto=-1

Adicionando novas rotas:
rotas adicionadas
config loaded....
Iniciando o tratador de arquivos de config....

Esperando nova conexao ...
instantiating app ryu.controller.ofp_handler of OFPHandler
BRICK FLOWPRI2
  CONSUMES EventOFPFlowRemoved
  CONSUMES EventOFPPacketIn
  CONSUMES EventOFPPortStatus
  CONSUMES EventOFPSwitchFeatures
BRICK ofp_event
  PROVIDES EventOFPFlowRemoved TO {'FLOWPRI2': {'main'}}
  PROVIDES EventOFPPacketIn TO {'FLOWPRI2': {'main'}}
  PROVIDES EventOFPPortStatus TO {'FLOWPRI2': {'main'}}
  PROVIDES EventOFPSwitchFeatures TO {'FLOWPRI2': {'config'}}
  CONSUMES EventOFPEchoReply
  CONSUMES EventOFPEchoRequest
  CONSUMES EventOFPErrorMsg
  CONSUMES EventOFPHello
  CONSUMES EventOFPPortDescStatsReply
  CONSUMES EventOFPPortStatus
  CONSUMES EventOFPSwitchFeatures
connected socket:<eventlet.greenio.base.GreenSocket object at 0x751e88531d90> address:('172.16.3.50', 35994)
hello ev <ryu.controller.ofp_event.EventOFPHello object at 0x751e881c0310>
move onto config mode
EVENT ofp_event->FLOWPRI2 EventOFPSwitchFeatures
switch features ev version=0x4,msg_type=0x6,msg_len=0x20,xid=0xe6018234,OFPSwitchFeatures(auxiliary_id=0,capabilities=79,datapath_id=3,n_buffers=0,n_tables=254)
Novo switch anunciado.... tempoAtivo: 4237 

[20:39:32.076855] switch_features - setup de S3 

Switch name:  3
nome-switch: 3 porta: 10  interface: veth16
[new_switch_handler]Entradas de qos anteriores foram removidas do ovsdb para a porta veth16
[new_switch_handler] SUCESSO - filas anteriores removidas veth16
[new_switch_handler] SUCESSO - Novas configuracoes de filas foram estabelecidas porta veth16
echo 214336414 | sudo -S ovs-vsctl -- set port veth16 qos=@newqos --                                 --id=@newqos create qos type=linux-htb other-config:max-rate=50000000                                 queues=0=@q0,1=@q1,2=@q2,3=@q3,4=@q4,5=@q5,6=@q6,7=@q7 --                                 --id=@q0 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=10 --                                 --id=@q1 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=5 --                                 --id=@q2 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=2 --                                 --id=@q3 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=10 --                                 --id=@q4 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=5 --                                 --id=@q5 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=2 --                                 --id=@q6 create queue other-config:min-rate=12500000 other-config:max-rate=50000000 other-config:priority=10 --                                 --id=@q7 create queue other-config:min-rate=3500000 other-config:max-rate=3500100 other-config:priority=2                                 
nome-switch: 3 porta: 11  interface: veth18
[new_switch_handler]Entradas de qos anteriores foram removidas do ovsdb para a porta veth18
[new_switch_handler] SUCESSO - filas anteriores removidas veth18
[new_switch_handler] SUCESSO - Novas configuracoes de filas foram estabelecidas porta veth18
echo 214336414 | sudo -S ovs-vsctl -- set port veth18 qos=@newqos --                                 --id=@newqos create qos type=linux-htb other-config:max-rate=50000000                                 queues=0=@q0,1=@q1,2=@q2,3=@q3,4=@q4,5=@q5,6=@q6,7=@q7 --                                 --id=@q0 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=10 --                                 --id=@q1 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=5 --                                 --id=@q2 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=2 --                                 --id=@q3 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=10 --                                 --id=@q4 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=5 --                                 --id=@q5 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=2 --                                 --id=@q6 create queue other-config:min-rate=12500000 other-config:max-rate=50000000 other-config:priority=10 --                                 --id=@q7 create queue other-config:min-rate=3500000 other-config:max-rate=3500100 other-config:priority=2                                 
nome-switch: 3 porta: 12  interface: veth20
[new_switch_handler]Entradas de qos anteriores foram removidas do ovsdb para a porta veth20
[new_switch_handler] SUCESSO - filas anteriores removidas veth20
[new_switch_handler] SUCESSO - Novas configuracoes de filas foram estabelecidas porta veth20
echo 214336414 | sudo -S ovs-vsctl -- set port veth20 qos=@newqos --                                 --id=@newqos create qos type=linux-htb other-config:max-rate=50000000                                 queues=0=@q0,1=@q1,2=@q2,3=@q3,4=@q4,5=@q5,6=@q6,7=@q7 --                                 --id=@q0 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=10 --                                 --id=@q1 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=5 --                                 --id=@q2 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=2 --                                 --id=@q3 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=10 --                                 --id=@q4 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=5 --                                 --id=@q5 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=2 --                                 --id=@q6 create queue other-config:min-rate=12500000 other-config:max-rate=50000000 other-config:priority=10 --                                 --id=@q7 create queue other-config:min-rate=3500000 other-config:max-rate=3500100 other-config:priority=2                                 
nome-switch: 3 porta: 13  interface: veth22
[new_switch_handler]Entradas de qos anteriores foram removidas do ovsdb para a porta veth22
[new_switch_handler] SUCESSO - filas anteriores removidas veth22
[new_switch_handler] SUCESSO - Novas configuracoes de filas foram estabelecidas porta veth22
echo 214336414 | sudo -S ovs-vsctl -- set port veth22 qos=@newqos --                                 --id=@newqos create qos type=linux-htb other-config:max-rate=50000000                                 queues=0=@q0,1=@q1,2=@q2,3=@q3,4=@q4,5=@q5,6=@q6,7=@q7 --                                 --id=@q0 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=10 --                                 --id=@q1 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=5 --                                 --id=@q2 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=2 --                                 --id=@q3 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=10 --                                 --id=@q4 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=5 --                                 --id=@q5 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=2 --                                 --id=@q6 create queue other-config:min-rate=12500000 other-config:max-rate=50000000 other-config:priority=10 --                                 --id=@q7 create queue other-config:min-rate=3500000 other-config:max-rate=3500100 other-config:priority=2                                 
nome-switch: 3 porta: 14  interface: veth23
[new_switch_handler]Entradas de qos anteriores foram removidas do ovsdb para a porta veth23
[new_switch_handler] SUCESSO - filas anteriores removidas veth23
[new_switch_handler] SUCESSO - Novas configuracoes de filas foram estabelecidas porta veth23
echo 214336414 | sudo -S ovs-vsctl -- set port veth23 qos=@newqos --                                 --id=@newqos create qos type=linux-htb other-config:max-rate=50000000                                 queues=0=@q0,1=@q1,2=@q2,3=@q3,4=@q4,5=@q5,6=@q6,7=@q7 --                                 --id=@q0 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=10 --                                 --id=@q1 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=5 --                                 --id=@q2 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=2 --                                 --id=@q3 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=10 --                                 --id=@q4 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=5 --                                 --id=@q5 create queue other-config:min-rate=34000000 other-config:max-rate=34000100 other-config:priority=2 --                                 --id=@q6 create queue other-config:min-rate=12500000 other-config:max-rate=50000000 other-config:priority=10 --                                 --id=@q7 create queue other-config:min-rate=3500000 other-config:max-rate=3500100 other-config:priority=2                                 
Switch table:
{"nome": 3, "port_to_controller": 12, "ovsdb_addr": "tcp:172.16.3.10:6633", "qtd_portas": 5, "datapath": true}
[switch_features] fim settage - tempo_decorrido: 62

move onto main mode
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278783226  ---- tempo em funcionamento:  15386
Tamanho do pacote:  70    ou seria:    70
tem header ipv6 - rejeitado
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278783234  ---- tempo em funcionamento:  15394
Tamanho do pacote:  70    ou seria:    70
tem header ipv6 - rejeitado
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278785867  ---- tempo em funcionamento:  18027
Tamanho do pacote:  87    ou seria:    87
tem header ipv4
tem header udp
calculate_prefix de:  172.16.3.50
calculate_prefix de:  224.0.0.251
[pkt-in]Não ha rota para este fluxo ! abort
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278786296  ---- tempo em funcionamento:  18456
Tamanho do pacote:  70    ou seria:    70
tem header ipv6 - rejeitado
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278786809  ---- tempo em funcionamento:  18969
Tamanho do pacote:  107    ou seria:    107
tem header ipv6 - rejeitado
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278787000  ---- tempo em funcionamento:  19160
Tamanho do pacote:  107    ou seria:    107
tem header ipv6 - rejeitado
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278787073  ---- tempo em funcionamento:  19233
Tamanho do pacote:  107    ou seria:    107
tem header ipv6 - rejeitado
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278788345  ---- tempo em funcionamento:  20505
Tamanho do pacote:  70    ou seria:    70
tem header ipv6 - rejeitado
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278788856  ---- tempo em funcionamento:  21016
Tamanho do pacote:  70    ou seria:    70
tem header ipv6 - rejeitado
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278797755  ---- tempo em funcionamento:  29915
Tamanho do pacote:  42    ou seria:    42
[packet-in]Tratando ARP 172.16.2.10->172.16.2.30
calculate_prefix de:  172.16.2.10
calculate_prefix de:  172.16.2.30
[creat_be]Error: no route found for this flow: s:172.16.2.10 d:172.16.2.30 qos_mark:-1
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278812920  ---- tempo em funcionamento:  45080
Tamanho do pacote:  70    ou seria:    70
tem header ipv6 - rejeitado
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278812930  ---- tempo em funcionamento:  45090
Tamanho do pacote:  70    ou seria:    70
tem header ipv6 - rejeitado
EVENT ofp_event->FLOWPRI2 EventOFPPacketIn


###################################################################################
[packet_in] init  1745278815973  ---- tempo em funcionamento:  48133
Tamanho do pacote:  146    ou seria:    146
tem header ipv4
tem header tcp
calculate_prefix de:  172.16.2.50
calculate_prefix de:  172.16.2.10
[pkt-in]Não ha rota para este fluxo ! abort
EVENT ofp_event->FLOWPRI2 EventOFPPortStatus
OFPPortStatus received: reason=DELETE desc=OFPPort(port_no=10,hw_addr='46:8f:17:f2:04:1b',name=b'veth16',config=0,state=4,curr=2112,advertised=0,supported=0,peer=0,curr_speed=10000000,max_speed=0)
EVENT ofp_event->FLOWPRI2 EventOFPPortStatus
OFPPortStatus received: reason=DELETE desc=OFPPort(port_no=11,hw_addr='3e:3c:82:8a:1a:3c',name=b'veth18',config=0,state=4,curr=2112,advertised=0,supported=0,peer=0,curr_speed=10000000,max_speed=0)
